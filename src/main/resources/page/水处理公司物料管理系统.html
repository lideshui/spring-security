<!DOCTYPE html>
<!-- saved from url=(0264)https://space-static.coze.cn/7522451603347505449/%E6%B0%B4%E5%A4%84%E7%90%86%E7%99%BB%E5%BD%95%E9%A1%B5%E8%AE%BE%E8%AE%A1%28%E5%86%85%E7%BD%91%E7%89%88%29-d989d0fc35.html?sign=1757666559-1947231bbc-0-c8bdc3ed097067601ac64a69f41d2b337a4562dfd5d73ab8e6f6c1f6613ab4e7 -->
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--js-->
    <script type="text/javascript" src="/js/vue.js"></script>
    <script type="text/javascript" src="/js/plugins/element-ui.js"></script>
    <script type="text/javascript" src="/js/plugins/axios.js"></script>
    <!--css-->
    <link rel="stylesheet" type="text/css" href="/css/plugins/element-ui.css" />
    <title>B612小行星管理系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #ecf5ff;
            background-image: linear-gradient(to right, rgba(219, 234, 254, 0.6) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(219, 234, 254, 0.6) 1px, transparent 1px);
            background-size: 40px 40px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-container {
            background-color: white;
            border-radius: 10px;
            padding: 40px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 10px 25px -5px rgba(29, 78, 216, 0.1);
            position: relative;
            overflow: hidden;
        }

        .login-container::before,
        .login-container::after {
            content: '';
            position: absolute;
            width: 160px;
            height: 160px;
            background-color: rgba(59, 130, 246, 0.05);
            border-radius: 50%;
        }

        .login-container::before {
            top: -80px;
            right: -80px;
        }

        .login-container::after {
            bottom: -80px;
            left: -80px;
        }

        .logo-section {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .login-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        h1 {
            font-size: 24px;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .system-name {
            font-size: 14px;
            color: #64748b;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: #334155;
            font-weight: 500;
        }

        .input-wrapper {
            position: relative;
        }

        input {
            width: 100%;
            padding: 12px 15px 12px 45px;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        .el-input__inner {
            padding-left: 50px!important;
        }

        .icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: #94a3b8;
        }

        .icon-lock {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 25px;
            height: 20px;
            color: #94a3b8;
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            width: 20px;
            height: 20px;
            color: #94a3b8;
        }

        .options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .remember-me {
            display: flex;
            align-items: center;
        }

        .remember-me input {
            width: auto;
            margin-right: 8px;
            padding: 0;
        }

        .forgot-password {
            font-size: 14px;
            color: #3b82f6;
            text-decoration: none;
        }

        .login-btn, .el-button {
            width: 100%;
            padding: 12px;
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .login-btn:hover, .el-button:focus {
            color: white;
            background-color: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(29, 78, 216, 0.2);
        }

        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
            text-align: center;
        }

        .copyright, .version, .security-tip {
            font-size: 12px;
            color: #94a3b8;
            margin-bottom: 5px;
        }

        .security-tip {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .security-tip .icon {
            position: static;
            transform: none;
            margin-right: 5px;
        }
    </style>
</head>
<body>
<div id="vue" class="login-container">
    <div class="logo-section">
        <!-- 内联SVG水图标 -->
        <svg t="1755138872360" class="login-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="" p-id="42725" width="200" height="200"><path d="M765.4 537.4c-0.4-73.4 32.8-128.8 100-169.6-37.6-53.8-94.4-83.4-169.4-89.2-71-5.6-148.6 41.4-177 41.4-30 0-98.8-39.4-152.8-39.4C254.6 282.4 136 369.6 136 547q0 78.6 28.8 162.4c25.6 73.4 118 253.4 214.4 250.4 50.4-1.2 86-35.8 151.6-35.8 63.6 0 96.6 35.8 152.8 35.8 97.2-1.4 180.8-165 205.2-238.6-130.4-61.4-123.4-180-123.4-183.8z m-113.2-328.4c54.6-64.8 49.6-123.8 48-145-48.2 2.8-104 32.8-135.8 69.8-35 39.6-55.6 88.6-51.2 143.8 52.2 4 99.8-22.8 139-68.6z" p-id="42726" fill="#707070"></path></svg>
        <h1>B612小行星管理系统</h1>
        <p class="system-name">B612 Asteroid Management System</p>
    </div>

    <el-form :model="form" ref="form" :rules="rules" @submit.native.prevent="submitForm">
        <el-form-item prop="userName">
            <label style="margin-bottom: 0">用户名</label>
            <el-input placeholder="请输入用户名" v-model="form.userName">
                <template slot="prefix">
                    <svg t="1755138260119" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="41649" width="200" height="200"><path d="M512 512c141.4 0 256-114.6 256-256S653.4 0 512 0 256 114.6 256 256s114.6 256 256 256z m179.2 64h-33.4c-44.4 20.4-93.8 32-145.8 32s-101.2-11.6-145.8-32h-33.4C184.4 576 64 696.4 64 844.8V928c0 53 43 96 96 96h704c53 0 96-43 96-96v-83.2c0-148.4-120.4-268.8-268.8-268.8z" p-id="41650" fill="#707070"></path></svg>
                </template>
            </el-input>
        </el-form-item>

        <el-form-item prop="password">
            <el-input placeholder="请输入密码" v-model="form.password" :type="showPassword ? 'text' : 'password'" autocomplete="off">
                <template slot="prefix">
                    <svg t="1755138176236" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="41173" width="200" height="200"><path d="M864 448h-48v-144C816 136.4 679.6 0 512 0S208 136.4 208 304v144H160c-53 0-96 43-96 96v384c0 53 43 96 96 96h704c53 0 96-43 96-96V544c0-53-43-96-96-96z m-208 0H368v-144c0-79.4 64.6-144 144-144s144 64.6 144 144v144z" p-id="41174" fill="#707070"></path></svg>
                </template>
                <i slot="suffix" class="el-input__icon el-icon-view" style="cursor: pointer" @click="showPassword = !showPassword"></i>
            </el-input>
        </el-form-item>

        <div class="options">
            <a href="https://space-static.coze.cn/7522451603347505449/%E6%B0%B4%E5%A4%84%E7%90%86%E7%99%BB%E5%BD%95%E9%A1%B5%E8%AE%BE%E8%AE%A1%28%E5%86%85%E7%BD%91%E7%89%88%29-d989d0fc35.html?sign=1757666559-1947231bbc-0-c8bdc3ed097067601ac64a69f41d2b337a4562dfd5d73ab8e6f6c1f6613ab4e7#" class="forgot-password">忘记密码?</a>
            <a href="https://space-static.coze.cn/7522451603347505449/%E6%B0%B4%E5%A4%84%E7%90%86%E7%99%BB%E5%BD%95%E9%A1%B5%E8%AE%BE%E8%AE%A1%28%E5%86%85%E7%BD%91%E7%89%88%29-d989d0fc35.html?sign=1757666559-1947231bbc-0-c8bdc3ed097067601ac64a69f41d2b337a4562dfd5d73ab8e6f6c1f6613ab4e7#" class="forgot-password">注册新用户</a>
        </div>

        <el-button class="login-btn" native-type="submit">登录</el-button>
    </el-form>

    <div class="footer">
        <p class="copyright">© 2260 B612小行星有限公司. 版权所有</p>
        <p class="version">系统版本: v2.1.0</p>
        <p class="security-tip">
            <!-- 内联SVG盾牌图标 -->
            <svg t="1755139774526" class="icon" style="height: 15px; width: 15px;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="40797" width="200" height="200"><path d="M933 167.4l-384-160a96.3 96.3 0 0 0-73.8 0l-384 160C55.4 182.2 32 217.2 32 256c0 397 229 671.4 443 760.6 23.6 9.8 50.2 9.8 73.8 0C720.2 945.2 992 698.6 992 256c0-38.8-23.4-73.8-59-88.6zM512.2 892.6l-0.2-762 351.8 146.6c-6.6 302.8-164.2 522.2-351.6 615.4z" p-id="40798" fill="#bfbfbf"></path></svg>
            请保护您的账号信息
        </p>
    </div>
</div>

<script th:inline="javascript">
    let item = new Vue({
        el: '#vue',
        data: {
            form: {
                userName: '',
                password: '',
            },
            rules: {
                userName: [{required: true, message: '请输入用户名', trigger: 'blur'}],
                password: [{required: true, message: '请输入密码', trigger: 'blur'}],
            },
        },
        methods: {
            // 提交表单
            submitForm() {
                this.$refs['form'].validate((valid) => {
                    if (valid) {
                        axios.post('/api/auth/login', this.form)
                            .then(response => {
                                if(response.data.code === 200){
                                    this.$message.success("登录成功!");
                                    // 登录成功，设置 Cookie
                                    document.cookie = `token=${response.data.data}; max-age=${3 * 60 * 60}; path=/`;
                                    // 查询当前登录用户信息
                                    this.getLoginUser()
                                }else {
                                    this.$message.error(response.data.data);
                                }
                            })
                            .catch(error => {
                                this.$message.error("登录失败: " + error.message);
                            });
                    } else {
                        console.log('表单验证失败');
                        return false;
                    }
                });
            },
            // 获取当前登录用户信息
            async getLoginUser() {
                axios.get("/api/auth/getLoginUser", {
                    params: {}
                }).then(response => {
                    if (response.data.code === 200) {
                        localStorage.setItem("user", JSON.stringify(response.data.data));
                        // 登录成功后重定向到计划页
                        window.location.href = '/';
                    } else {
                        this.$message.error(response.data.data);
                    }
                }).catch(error => {
                    this.$message.error("获取登录用户信息异常: " + error.message);
                });
            },
        },
    })
</script>

</body></html>